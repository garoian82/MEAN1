!function(){"use strict";angular.module("app",["ui.router","app.ui","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/projects"),t.state("projects",{url:"/projects",templateUrl:"partials/projects/index.html",controller:"ProjectsController",controllerAs:"projectsController",resolve:{users:["Users",function(t){return t.get()}],projects:["Projects","users",function(t,e){return t.get()}]}}).state("projects.detail",{url:"/:projectId",templateUrl:"partials/projects/detail.html",controller:"ProjectController",controllerAs:"projectController",resolve:{project:["Projects","$stateParams","projects",function(t,e,r){return t.find(e.projectId)}]}}).state("projects.detail.edit",{url:"/edit",templateUrl:"partials/projects/edit.html",controller:"EditController",controllerAs:"editController"}).state("new",{url:"/new",templateUrl:"partials/projects/add.html",controller:"AddController",controllerAs:"addController"})}])}(),function(){"use strict";angular.module("app.ui",[])}(),function(){"use strict";angular.module("app").controller("BodyController",["Projects",function(t){var e=this;e.welcome="Hi There",t.get().then(function(t){e.projects=t})}])}(),function(){"use strict";angular.module("app").factory("User",function(){function t(t){_.merge(this,{first_name:"",last_name:"",email:""},t||{})}return t.prototype={fullName:function(){return this.first_name+" "+this.last_name}},t})}(),function(){"use strict";angular.module("app").filter("niceDate",function(){return function(t,e){e=e||"MMMM Do, YYYY";var r=moment(t);return r.format(e)}})}(),function(){"use strict";angular.module("app").controller("EditController",["project","Projects","Users",function(t,e,r){var o=this;o.users=r.users,o.project=t,o.update=e.put}])}(),function(){"use strict";angular.module("app").controller("NewProjectCtrl",["$modalInstance","Users",function(t,e){var r=this;r.users=e.users,r.project={},r.close=function(){t.close(r.project)},r.dismiss=function(){t.dismiss()}}])}(),function(){"use strict";angular.module("app").controller("ProjectController",["project","Projects",function(t,e){var r=this;r.project=t,r.del=e.del}])}(),function(){"use strict";angular.module("app").controller("ProjectsController",["projects","Projects","$modal","$state",function(t,e,r,o){var n=this;n.projects=t,n.remove=e.del,n.addProject=function(){r.open({templateUrl:"javascripts/projects/new.html",controller:"NewProjectCtrl",controllerAs:"newProject",size:"md"}).result.then(function(t){e.post(t)})}}])}(),function(){"use strict";angular.module("app").service("Projects",["$http","$state","Users",function(t,e,r){var o=this;o.projects=[],o.find=function(t){return _.find(o.projects,{_id:t})},o.get=function(){return t.get("/projects").then(function(t){return o.projects.splice(0),t.data.forEach(function(t){t.user=r.find(t.user),o.projects.push(t)}),o.projects})},o.post=function(e){return t.post("/projects/",e).then(function(t){t.data.user=r.find(t.data.user),o.projects.push(t.data)})},o.put=function(r){var o={title:r.title};return t.put("/projects/"+r._id,o).then(function(t){e.go("projects.detail",{projectId:r._id})},function(t){})},o.remove=function(t){_.remove(o.projects,{_id:t._id})},o.del=function(r){return t["delete"]("/projects/"+r).then(function(t){o.remove(r),e.go("projects")})}}])}(),function(){"use strict";angular.module("app").service("Users",["$http","User",function(t,e){var r=this;r.users=[],r.find=function(t){return _.find(r.users,{_id:t})},r.get=function(){return t.get("/users").then(function(t){return r.users.splice(0),t.data.forEach(function(t){r.users.push(new e(t))}),r.users})}}])}(),function(){"use strict";angular.module("app.ui").directive("projectsTable",["Projects",function(t){function e(e){e.remove=t.del}return e.$inject=["$scope"],{restrict:"E",templateUrl:"partials/directives/project-table.html",controller:e,scope:{projects:"=",remove:"="}}}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJ1aS5tb2R1bGUuanMiLCJib2R5LmNvbnRyb2xsZXIuanMiLCJmYWN0b3JpZXMvdXNlci5mYWN0b3J5LmpzIiwiZmlsdGVycy9kYXRlLmZpbHRlci5qcyIsInByb2plY3RzL2VkaXQuY29udHJvbGxlci5qcyIsInByb2plY3RzL25ldy1wcm9qZWN0LmNvbnRyb2xsZXIuanMiLCJwcm9qZWN0cy9wcm9qZWN0LmNvbnRyb2xsZXIuanMiLCJwcm9qZWN0cy9wcm9qZWN0cy5jb250cm9sbGVyLmpzIiwic2VydmljZXMvcHJvamVjdHMuc2VydmljZS5qcyIsInNlcnZpY2VzL3VzZXJzLnNlcnZpY2UuanMiLCJkaXJlY3RpdmVzL3Byb2plY3QvcHJvamVjdHMtdGFibGUuZGlyZWN0aXZlLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwicmVzb2x2ZSIsInVzZXJzIiwiVXNlcnMiLCJnZXQiLCJwcm9qZWN0cyIsIlByb2plY3RzIiwicHJvamVjdCIsIiRzdGF0ZVBhcmFtcyIsImZpbmQiLCJwcm9qZWN0SWQiLCJ2bSIsInRoaXMiLCJ3ZWxjb21lIiwidGhlbiIsImZhY3RvcnkiLCJVc2VyIiwiZGF0YSIsIl8iLCJtZXJnZSIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJlbWFpbCIsInByb3RvdHlwZSIsImZ1bGxOYW1lIiwiZmlsdGVyIiwidGltZVN0YW1wIiwiZm9ybWF0IiwibSIsIm1vbWVudCIsInVwZGF0ZSIsInB1dCIsIiRtb2RhbEluc3RhbmNlIiwiY2xvc2UiLCJkaXNtaXNzIiwiZGVsIiwiJG1vZGFsIiwiJHN0YXRlIiwicmVtb3ZlIiwiYWRkUHJvamVjdCIsIm9wZW4iLCJzaXplIiwicmVzdWx0IiwicmVzIiwicG9zdCIsInNlcnZpY2UiLCIkaHR0cCIsIl9pZCIsInNwbGljZSIsImZvckVhY2giLCJ1c2VyIiwicHVzaCIsInRpdGxlIiwiZ28iLCJlcnIiLCJ1c2VySWQiLCJkaXJlY3RpdmUiLCIkc2NvcGUiLCIkaW5qZWN0IiwicmVzdHJpY3QiLCJzY29wZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLE9BQUEsWUFBQSxTQUFBLGlCQUVBQyxRQUFBLGlCQUFBLHFCQUFBLFNBQUFDLEVBQUFDLEdBR0FBLEVBQUFDLFVBQUEsYUFHQUYsRUFDQUcsTUFBQSxZQUNBQyxJQUFBLFlBQ0FDLFlBQUEsK0JBQ0FDLFdBQUEscUJBQ0FDLGFBQUEscUJBQ0FDLFNBQ0FDLE9BQUEsUUFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLFFBRUFDLFVBQUEsV0FBQSxRQUFBLFNBQUFDLEVBQUFKLEdBQ0EsTUFBQUksR0FBQUYsV0FLQVIsTUFBQSxtQkFDQUMsSUFBQSxjQUNBQyxZQUFBLGdDQUNBQyxXQUFBLG9CQUNBQyxhQUFBLG9CQUNBQyxTQUNBTSxTQUFBLFdBQUEsZUFBQSxXQUFBLFNBQUFELEVBQUFFLEVBQUFILEdBQ0EsTUFBQUMsR0FBQUcsS0FBQUQsRUFBQUUsZ0JBSUFkLE1BQUEsd0JBQ0FDLElBQUEsUUFDQUMsWUFBQSw4QkFDQUMsV0FBQSxpQkFDQUMsYUFBQSxtQkFFQUosTUFBQSxPQUNBQyxJQUFBLE9BQ0FDLFlBQUEsNkJBQ0FDLFdBQUEsZ0JBQ0FDLGFBQUEsd0JDaERBLFdBQ0EsWUFFQVYsU0FBQUMsT0FBQSxnQkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsT0FDQVEsV0FBQSxrQkFBQSxXQUFBLFNBQUFPLEdBRUEsR0FBQUssR0FBQUMsSUFFQUQsR0FBQUUsUUFBQSxXQUdBUCxFQUFBRixNQUNBVSxLQUFBLFNBQUFULEdBQ0FNLEVBQUFOLFNBQUFBLFVDYkEsV0FDQSxZQUVBZixTQUFBQyxPQUFBLE9BQ0F3QixRQUFBLE9BQUEsV0FFQSxRQUFBQyxHQUFB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T0FHQXBDLEVBQUF3QixJQUFBLFNBQUF6QixHQUNBLE1BQUFvQyxHQUFBQSxVQUFBLGFBQUFwQyxHQUNBSSxLQUFBLFNBQUE2QixHQUNBaEMsRUFBQTJCLE9BQUE1QixHQUNBMkIsRUFBQWdCLEdBQUEscUJDbkVBLFdBRUEsWUFFQS9ELFNBQUFDLE9BQUEsT0FDQXNELFFBQUEsU0FBQSxRQUFBLE9BQUEsU0FBQUMsRUFBQTlCLEdBQ0EsR0FBQUwsR0FBQUMsSUFDQUQsR0FBQVQsU0FFQVMsRUFBQUYsS0FBQSxTQUFBOEMsR0FDQSxNQUFBckMsR0FBQVQsS0FBQUUsRUFBQVQsT0FBQTZDLElBQUFRLEtBR0E1QyxFQUFBUCxJQUFBLFdBQ0EsTUFBQTBDLEdBQUExQyxJQUFBLFVBQ0FVLEtBQUEsU0FBQTZCLEdBT0EsTUFOQWhDLEdBQUFULE1BQUE4QyxPQUFBLEdBRUFMLEVBQUExQixLQUFBZ0MsUUFBQSxTQUFBQyxHQUNBdkMsRUFBQVQsTUFBQWlELEtBQUEsR0FBQW5DLEdBQUFrQyxNQUdBdkMsRUFBQVQsZUN0QkEsV0FDQSxZQUVBWixTQUFBQyxPQUFBLFVBR0FpRSxVQUFBLGlCQUFBLFdBQUEsU0FBQWxELEdBR0EsUUFBQVAsR0FBQTBELEdBQ0FBLEVBQUFuQixPQUFBaEMsRUFBQTZCLElBR0EsTUNvU0dwQyxHQUFXMkQsU0FBVyxXRG5TekJDLFNBQUEsSUFDQTdELFlBQUEseUNBQ0FDLFdBQUFBLEVBQ0E2RCxPQUNBdkQsU0FBQSxJQUNBaUMsT0FBQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJywgJ2FwcC51aScsICd1aS5ib290c3RyYXAnXSlcblxuXHQuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cblx0XHQvL0RlZmF1bHQgcm91dGVcblx0XHQkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvcHJvamVjdHMnKTtcblxuXHRcdC8vRGVmaW5lIG91ciBzdGF0ZXMgXG5cdFx0JHN0YXRlUHJvdmlkZXJcblx0XHRcdC5zdGF0ZSgncHJvamVjdHMnLCB7XG5cdFx0XHRcdHVybDogJy9wcm9qZWN0cycsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcHJvamVjdHMvaW5kZXguaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdQcm9qZWN0c0NvbnRyb2xsZXInLFxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICdwcm9qZWN0c0NvbnRyb2xsZXInLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0dXNlcnM6IGZ1bmN0aW9uIChVc2Vycykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFVzZXJzLmdldCgpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cHJvamVjdHM6IGZ1bmN0aW9uIChQcm9qZWN0cywgdXNlcnMpIHtcblx0XHRcdFx0XHRcdHJldHVybiBQcm9qZWN0cy5nZXQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0XHRcdC5zdGF0ZSgncHJvamVjdHMuZGV0YWlsJywge1xuXHRcdFx0XHR1cmw6ICcvOnByb2plY3RJZCcsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcHJvamVjdHMvZGV0YWlsLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnUHJvamVjdENvbnRyb2xsZXInLFxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICdwcm9qZWN0Q29udHJvbGxlcicsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRwcm9qZWN0OiBmdW5jdGlvbiAoUHJvamVjdHMsICRzdGF0ZVBhcmFtcywgcHJvamVjdHMpIHtcblx0XHRcdFx0XHRcdHJldHVybiBQcm9qZWN0cy5maW5kKCRzdGF0ZVBhcmFtcy5wcm9qZWN0SWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgncHJvamVjdHMuZGV0YWlsLmVkaXQnLCB7XG5cdFx0XHRcdHVybDogJy9lZGl0Jyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9wcm9qZWN0cy9lZGl0Lmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnRWRpdENvbnRyb2xsZXInLFxuXHRcdFx0XHRjb250cm9sbGVyQXM6ICdlZGl0Q29udHJvbGxlcidcblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ25ldycsIHtcblx0XHRcdFx0dXJsOiAnL25ldycsXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcHJvamVjdHMvYWRkLmh0bWwnLFxuXHRcdFx0XHRjb250cm9sbGVyOiAnQWRkQ29udHJvbGxlcicsXG5cdFx0XHRcdGNvbnRyb2xsZXJBczogJ2FkZENvbnRyb2xsZXInXG5cdFx0XHR9KTtcblx0fSk7XG5cbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAudWknLCBbXSk7XG5cdFxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ0JvZHlDb250cm9sbGVyJywgZnVuY3Rpb24gKFByb2plY3RzKSB7XG5cdFx0XHRcblx0XHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHRcdHZtLndlbGNvbWUgPSAnSGkgVGhlcmUnO1xuXG5cdFx0XHQvL2dldCBwcm9qZWN0cyBmcm9tIHNlcnZlclxuXHRcdFx0UHJvamVjdHMuZ2V0KClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKHByb2plY3RzKSB7XG5cdFx0XHRcdFx0dm0ucHJvamVjdHMgPSBwcm9qZWN0cztcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG59KCkpO1xuXG5cbiIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0XHQuZmFjdG9yeSgnVXNlcicsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0ZnVuY3Rpb24gVXNlcihkYXRhKSB7XG5cdFx0XHRcdF8ubWVyZ2UodGhpcywge1xuXHRcdFx0XHRcdGZpcnN0X25hbWU6ICcnLFxuXHRcdFx0XHRcdGxhc3RfbmFtZTogJycsXG5cdFx0XHRcdFx0ZW1haWw6ICcnXG5cdFx0XHRcdH0sIGRhdGEgfHwge30pO1xuXHRcdFx0fVxuXG5cdFx0XHRVc2VyLnByb3RvdHlwZSA9IHtcblx0XHRcdFx0ZnVsbE5hbWU6IGZ1bmN0aW9uIGZ1bGxOYW1lKCkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmZpcnN0X25hbWUgKyAnICcgKyB0aGlzLmxhc3RfbmFtZTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0cmV0dXJuIFVzZXI7XG5cdFx0fSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0XHQuZmlsdGVyKCduaWNlRGF0ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiAodGltZVN0YW1wLCBmb3JtYXQpIHtcblx0XHRcdFx0Zm9ybWF0ID0gZm9ybWF0IHx8ICdNTU1NIERvLCBZWVlZJztcblx0XHRcdFx0dmFyIG0gPSBtb21lbnQodGltZVN0YW1wKTtcblx0XHRcdFx0cmV0dXJuIG0uZm9ybWF0KGZvcm1hdCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ0VkaXRDb250cm9sbGVyJywgZnVuY3Rpb24gKHByb2plY3QsIFByb2plY3RzLCBVc2Vycykge1xuXHRcdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdFx0dm0udXNlcnMgICA9IFVzZXJzLnVzZXJzO1xuXHRcdFx0dm0ucHJvamVjdCA9IHByb2plY3Q7XG5cdFx0XHR2bS51cGRhdGUgID0gUHJvamVjdHMucHV0O1xuXHRcdH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ05ld1Byb2plY3RDdHJsJywgZnVuY3Rpb24gKCRtb2RhbEluc3RhbmNlLCBVc2Vycykge1xuXHRcdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdFx0dm0udXNlcnMgICA9IFVzZXJzLnVzZXJzO1xuXHRcdFx0dm0ucHJvamVjdCA9IHt9O1xuXG5cdFx0XHR2bS5jbG9zZSA9IGZ1bmN0aW9uIGNsb3NlKCkge1xuXHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSh2bS5wcm9qZWN0KTtcblx0XHRcdH07XG5cblx0XHRcdHZtLmRpc21pc3MgPSBmdW5jdGlvbiBkaXNtaXNzKCkge1xuXHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuXHRcdC5jb250cm9sbGVyKCdQcm9qZWN0Q29udHJvbGxlcicsIGZ1bmN0aW9uIChwcm9qZWN0LCBQcm9qZWN0cykge1xuXHRcdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdFx0dm0ucHJvamVjdCA9IHByb2plY3Q7XG5cdFx0XHR2bS5kZWwgPSBQcm9qZWN0cy5kZWw7XG5cdFx0fSk7XG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpXG5cdFx0LmNvbnRyb2xsZXIoJ1Byb2plY3RzQ29udHJvbGxlcicsIGZ1bmN0aW9uIChwcm9qZWN0cywgUHJvamVjdHMsICRtb2RhbCwgJHN0YXRlKSB7XG5cdFx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cblx0XHRcdHZtLnByb2plY3RzID0gcHJvamVjdHM7XG5cdFx0XHR2bS5yZW1vdmUgPSBQcm9qZWN0cy5kZWw7XG5cdFx0XHR2bS5hZGRQcm9qZWN0ID0gZnVuY3Rpb24gYWRkUHJvamVjdCgpIHtcblx0XHRcdFx0dmFyIG1vZGFsSW5zdGF0YW5jZSA9ICRtb2RhbC5vcGVuICh7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdqYXZhc2NyaXB0cy9wcm9qZWN0cy9uZXcuaHRtbCcsXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ05ld1Byb2plY3RDdHJsJyxcblx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICduZXdQcm9qZWN0Jyxcblx0XHRcdFx0XHRzaXplOiAnbWQnXG5cdFx0XHRcdH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHRQcm9qZWN0cy5wb3N0KHJlcyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0fTtcblx0XHRcdFxuXHRcdH0pO1xufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0XHQuc2VydmljZSgnUHJvamVjdHMnLCBmdW5jdGlvbiAoJGh0dHAsICRzdGF0ZSwgVXNlcnMpIHtcblx0XHRcdFxuXHRcdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdFx0dm0ucHJvamVjdHMgPSBbXTtcblxuXHRcdFx0Ly91c2UgbG9kYXNoIHRvIGZpbmQgYSBwcmFydGljdWxhciBwcm9qZWN0IGlkXG5cdFx0XHR2bS5maW5kID0gZnVuY3Rpb24gZmluZChwcm9qZWN0SWQpIHtcblx0XHRcdFx0cmV0dXJuIF8uZmluZCh2bS5wcm9qZWN0cywge19pZDogcHJvamVjdElkfSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvL2dldCBvdXIgcHJvamVjdHMgZnJvbSBvdXIgc2VydmVyXG5cdFx0XHR2bS5nZXQgPSBmdW5jdGlvbiBnZXQgKCkge1xuXHRcdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvcHJvamVjdHMnKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHRcdFx0dm0ucHJvamVjdHMuc3BsaWNlKDApO1xuXHRcdFx0XHRcdHJlcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHByb2plY3QpIHtcblx0XHRcdFx0XHRcdHByb2plY3QudXNlciA9IFVzZXJzLmZpbmQocHJvamVjdC51c2VyKTtcblx0XHRcdFx0XHRcdHZtLnByb2plY3RzLnB1c2gocHJvamVjdCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHZtLnByb2plY3RzO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdHZtLnBvc3QgPSBmdW5jdGlvbiBwb3N0KHByb2plY3QpIHtcblxuXHRcdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL3Byb2plY3RzLycsIHByb2plY3QpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHRyZXMuZGF0YS51c2VyID0gVXNlcnMuZmluZChyZXMuZGF0YS51c2VyKTtcblx0XHRcdFx0XHR2bS5wcm9qZWN0cy5wdXNoKHJlcy5kYXRhKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyB2bS5wb3N0ID0gZnVuY3Rpb24gcG9zdChwcm9qZWN0KSB7XG5cblx0XHRcdC8vIFx0cmV0dXJuICRodHRwLnBvc3QoJy9wcm9qZWN0cy8nKVxuXHRcdFx0Ly8gXHQudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHQvLyBcdFx0dm0ucHJvamVjdHMucHVzaCh7cHJvamVjdH0pO1xuXHRcdFx0Ly8gXHRcdCRzdGF0ZS5nbygncHJvamVjdHMnKTtcblx0XHRcdC8vIFx0XHRkZWJ1Z2dlcjtcblx0XHRcdC8vIFx0fSk7XG5cdFx0XHQvLyB9O1xuXG5cdFx0XHR2bS5wdXQgPSBmdW5jdGlvbiBwdXQocHJvamVjdCkge1xuXHRcdFx0XHR2YXIgZGF0YSA9IHt0aXRsZTogcHJvamVjdC50aXRsZX07XG5cdFx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9wcm9qZWN0cy8nICsgcHJvamVjdC5faWQsIGRhdGEpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ3Byb2plY3RzLmRldGFpbCcsIHtwcm9qZWN0SWQ6IHByb2plY3QuX2lkfSk7XG5cdFx0XHRcdH0sIGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdFx0XHQvL1RPRE86IGhhbmRsZSB3aGVuIHdlIGNhbid0IHVwZGF0ZSBhIHByb2plY3QuXG5cdFx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHR9O1xuXG5cdFx0XHR2bS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUgKHByb2plY3RJZCkge1xuXHRcdFx0XHRfLnJlbW92ZSh2bS5wcm9qZWN0cywge19pZDogcHJvamVjdElkLl9pZH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0dm0uZGVsID0gZnVuY3Rpb24gZGVsIChwcm9qZWN0SWQpIHtcblx0XHRcdFx0cmV0dXJuICRodHRwLmRlbGV0ZSgnL3Byb2plY3RzLycgKyBwcm9qZWN0SWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHR2bS5yZW1vdmUocHJvamVjdElkKTtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ3Byb2plY3RzJyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9O1xuXHRcdH0pO1xufSgpKTtcblxuXG5cblxuXG5cblxuXG4iLCIoZnVuY3Rpb24gKCkge1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcblx0XHQuc2VydmljZSgnVXNlcnMnLCBmdW5jdGlvbiAoJGh0dHAsIFVzZXIpIHtcblx0XHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0XHR2bS51c2VycyA9IFtdO1xuXG5cdFx0XHR2bS5maW5kID0gZnVuY3Rpb24gZmluZCh1c2VySWQpIHtcblx0XHRcdFx0cmV0dXJuIF8uZmluZCh2bS51c2Vycywge19pZDogdXNlcklkfSk7XG5cdFx0XHR9O1xuXG5cdFx0XHR2bS5nZXQgPSBmdW5jdGlvbiBnZXQoKSB7XG5cdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy91c2VycycpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcblx0XHRcdFx0XHR2bS51c2Vycy5zcGxpY2UoMCk7XG5cblx0XHRcdFx0XHRyZXMuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uICh1c2VyKSB7XG5cdFx0XHRcdFx0XHR2bS51c2Vycy5wdXNoKG5ldyBVc2VyKHVzZXIpKTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdHJldHVybiB2bS51c2Vycztcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0fSk7XG5cbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAudWknKVxuXHRcdC8vYWx3YXlzIGNhbWVsIGNhc2UgdGhlIGRpcmVjdGl2ZSBpbiB0aGUgLmRpcmVjdGl2ZVxuXHRcdFxuXHRcdC5kaXJlY3RpdmUoJ3Byb2plY3RzVGFibGUnLCBmdW5jdGlvbiAoUHJvamVjdHMpIHtcblx0XHRcdC8vQ1JFQVQgVEhFIERETyAoRGlyZWN0aXZlIERlZmluaXRpb24gT2JqZWN0KVxuXG5cdFx0XHRmdW5jdGlvbiBjb250cm9sbGVyICgkc2NvcGUpIHtcblx0XHRcdFx0JHNjb3BlLnJlbW92ZSA9IFByb2plY3RzLmRlbDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9kaXJlY3RpdmVzL3Byb2plY3QtdGFibGUuaHRtbCcsXG5cdFx0XHRcdGNvbnRyb2xsZXI6IGNvbnRyb2xsZXIsXG5cdFx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdFx0cHJvamVjdHM6ICc9Jyxcblx0XHRcdFx0XHRyZW1vdmU6ICc9J1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pO1xufSgpKTsiLG51bGxdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
